
# 9.Ünite - Operatör Aşırı Yükleme

---

C# programlama dilinde operatörlerin (matematiksel, mantıksal, karşılaştırma vb.) kullanımını ve kullanıcı tanımlı sınıflar (class) için bu operatörlerin nasıl özelleştirileceğini (aşırı yükleme/overloading) ele almaktadır.

## 1. Operatörler ve Temel Kavramlar

Operatörler, değişkenler ve değerler üzerinde işlem yapmamızı sağlayan özel sembollerdir.

- **Aritmetik Operatörler:** `+`, `-`, `*`, `/`, `%` (mod), `++` (arttırma), `--` (azaltma).
    
- **Karşılaştırma Operatörleri:** `==`, `!=`, `<`, `>`, `<=`, `>=`. Sonuç her zaman `true` veya `false` döner.
    
- **Mantıksal Operatörler:** `&&` (VE), `||` (VEYA), `!` (DEĞİL)
    
- **Bit Tabanlı Operatörler:** Bit seviyesinde işlem yapar. `&` (VE), `|` (VEYA), `^` (XOR), `~` (Tersleme), `<<` (Sola kaydırma), `>>` (Sağa kaydırma)
    
- **Özel Amaçlı Operatörler:**
    
    - `?:` (Ternary): Kısa if-else yapısıdır (`koşul ? doğruysa : yanlışsa`)5.
        
    - `checked` / `unchecked`: Tamsayı işlemlerinde taşma (overflow) kontrolü yapar.
        
    - `typeof`: Bir nesnenin tür bilgisini (`System.Type`) verir.
        

### Tip Kontrolü ve Dönüşümü

C#'ta tip güvenliği için iki önemli operatör vardır:

1. **`is` Operatörü:** Nesnenin belirtilen tiple uyumlu olup olmadığını kontrol eder. `true` / `false` döner.
    
2. **`as` Operatörü:** Güvenli dönüşüm yapar. Dönüşüm başarısız olursa hata fırlatmaz, `null` değeri döndürür.
    

## 2. Operatör Aşırı Yükleme (Operator Overloading)

Kendi tanımladığımız sınıfların (örneğin `KarmasikSayi` veya `Vektor`), standart operatörlerle (`+`, `-`, `==` vb.) işlem yapabilmesini sağlamak için kullanılır.

- **Kural:** Operatör metotları mutlaka `public` ve `static` olmalıdır.
    
- **Syntax:** `public static DönüşTipi operator OperatörSembolü (Parametreler)`
    

### A. Aritmetik Operatörlerin Aşırı Yüklenmesi

İki nesneyi toplamak veya çıkarmak için kullanılır.

#### Uygulama Örneği: Nokta (Point) Toplama


```csharp
public class Nokta
{
    public int X { get; set; }
    public int Y { get; set; }

    public Nokta(int x, int y)
    {
        X = x;
        Y = y;
    }

    // '+' operatörünü aşırı yükleme
    public static Nokta operator +(Nokta nokta1, Nokta nokta2)
    {
        // İki noktanın X ve Y değerlerini toplayıp yeni bir Nokta döner
        return new Nokta(nokta1.X + nokta2.X, nokta1.Y + nokta2.Y);
    }
}

// Kullanım:
// Nokta n1 = new Nokta(3, 5);
// Nokta n2 = new Nokta(2, 4);
// Nokta toplam = n1 + n2; // (5, 9) olur
```

### B. İlişkisel (Karşılaştırma) Operatörlerin Aşırı Yüklenmesi

Nesnelerin eşitliğini veya büyüklüğünü karşılaştırmak için kullanılır.

- **Önemli Kural:** İlişkisel operatörler çiftler halinde yüklenmelidir. Eğer `==` yüklenirse, `!=` de yüklenmelidir. Aynı şekilde `<` yüklenirse `>` de yüklenmelidir.
    

#### Uygulama Örneği: Öğrenci Karşılaştırma


```csharp
public class Ogrenci
{
    public string Ad { get; set; }
    public int Yas { get; set; }

    // '==' operatörü
    public static bool operator ==(Ogrenci o1, Ogrenci o2)
    {
        // Null kontrolü önemlidir
        if (ReferenceEquals(o1, null) || ReferenceEquals(o2, null))
            return ReferenceEquals(o1, o2);

        return (o1.Ad == o2.Ad && o1.Yas == o2.Yas);
    }

    // '!=' operatörü (Çift olma zorunluluğu)
    public static bool operator !=(Ogrenci o1, Ogrenci o2)
    {
        return !(o1 == o2);
    }
    
    // Not: == operatörü ezildiğinde Equals() ve GetHashCode() metotlarının da 
    // ezilmesi (override) önerilir, ancak basitlik adına burada gösterilmemiştir.
}
```

### C. Dönüşüm Operatörleri (Implicit / Explicit)

Bir sınıfın başka bir tipe nasıl dönüştürüleceğini belirler.

- **`implicit` (Kapalı/Otomatik):** Veri kaybı riski olmayan, güvenli dönüşümler için kullanılır. Derleyici otomatik yapar.
    
- **`explicit` (Açık/Zorunlu):** Veri kaybı olabilecek durumlarda kullanılır. Parantez içinde tür belirtmek `(int)nesne` gerekir.
    

#### Uygulama Örneği: Mesafe Dönüşümü (Metre <-> Santimetre)


```csharp
public class Mesafe
{
    public double Metre { get; set; }

    public Mesafe(double metre)
    {
        this.Metre = metre;
    }

    // Implicit: Mesafe -> double (Otomatik dönüşüm)
    // Metreyi santimetreye çevirip double döner
    public static implicit operator double(Mesafe m)
    {
        return m.Metre * 100;
    }

    // Explicit: double -> Mesafe (Zorunlu dönüşüm)
    // Santimetreyi metreye çevirip Mesafe nesnesi döner
    public static explicit operator Mesafe(double santimetre)
    {
        return new Mesafe(santimetre / 100);
    }
}

// Kullanım:
// Mesafe m = new Mesafe(5);
// double cm = m; // Implicit (500 olur)
// Mesafe m2 = (Mesafe)450.0; // Explicit (4.5 metre olur)
```


