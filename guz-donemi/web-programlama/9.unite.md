
# 9.Ünite - Cookies (Çerezler)

---

Web sitelerinin kullanıcıyı hatırlamasını sağlayan **çerez (cookie)** yapısını, PHP ile çerez oluşturma, okuma ve silme işlemlerini ve bu teknolojinin avantaj/dezavantajlarını ele almaktadır.

## 1. Çerez (Cookie) Nedir?

Çerez, bir web sunucusu tarafından tarayıcı (browser) aracılığıyla kullanıcının bilgisayarına kaydedilen küçük veri parçacığıdır.

- **Amacı:** Kullanıcıyı hatırlamak (beni hatırla), oturum bilgilerini saklamak, alışveriş sepetini korumak ve kişiselleştirilmiş içerik sunmaktır.
    
- **Erişim Kuralı:** Bir çerez, yalnızca onu oluşturan alan adı (domain) tarafından okunabilir. Başka siteler bu verilere erişemez.
    
- **Çalışma Mantığı:** HTML kodları gönderilmeden önce, başlık (header) transferi sırasında sunucu ile tarayıcı arasında iletilir. Bu yüzden kod yazarken **HTML çıktısından önce** tanımlanmalıdır.
    

## 2. PHP'de Çerez Yönetimi

PHP'de çerez işlemleri `setcookie()` fonksiyonu ve `$_COOKIE` süper global dizisi ile yönetilir.

### Çerez Oluşturma (`setcookie`)

Söz dizimi: `setcookie(isim, değer, süre, yol, alan_adı, güvenli, http_only)`

- **İsim:** Çerezin çağrılacağı addır (Zorunlu).
    
- **Değer:** İçerisinde saklanacak veridir.
    
- **Süre:** Saniye cinsinden geçerlilik süresidir (Unix zaman damgası). Belirtilmezse tarayıcı kapanınca silinir.
    
- **Yol:** Çerezin sitenin hangi dizinlerinde geçerli olacağını belirtir (Genelde `/` kullanılarak tüm sitede aktif edilir).
    

### Çerez Okuma ve Kontrol Etme

- Tarayıcıda kayıtlı çerezlere `$_COOKIE['cerez_adi']` dizisi ile ulaşılır.
    
- Çerezin varlığını kontrol etmek için `isset()` fonksiyonu kullanılır.
    

### Çerez Silme ve Değiştirme

- **Değiştirme:** Aynı isimle yeni bir `setcookie()` tanımlaması yapılarak değeri güncellenir.
    
- **Silme:** Çerezi silmek için `setcookie()` fonksiyonu, **geçmiş bir zaman dilimi** (örneğin 1 saat öncesi) verilerek tekrar çalıştırılır.
    

## 3. Avantajlar ve Dezavantajlar

- **Avantajlar:** Kullanıcı deneyimini kişiselleştirir, oturumların açık kalmasını sağlar, e-ticaret sitelerinde sepet takibi yapar ve site analitiği için veri sağlar.
    
- **Dezavantajlar:** Gizlilik endişeleri yaratabilir (kullanıcı izleme), güvenlik riskleri oluşturabilir (hassas veriler saklanmamalıdır) ve kullanıcılar tarayıcı ayarlarından çerezleri engelleyebilir.
    

---

### Kod Örnekleri

Konuyu pekiştirmek için ders notlarından türetilmiş temel örnekler:

#### 1. Çerez Oluşturma (Süreli)

Bir kullanıcı adını 1 saatliğine (3600 saniye) kaydetme.


```php
<?php
// Şimdiki zaman + 3600 saniye
setcookie("kullanici_adi", "Istanbul Universitesi", time() + 3600);
?>
```

#### 2. Çerez Okuma ve Kontrol Etme

Çerez varsa ekrana yazdıran, yoksa uyarı veren yapı.


```php
<?php
if (isset($_COOKIE["kullanici_adi"])) {
    echo "Hoşgeldin: " . $_COOKIE["kullanici_adi"];
} else {
    echo "Çerez bulunamadı veya süresi doldu.";
}
?>
```

#### 3. Çerez Silme

Çerezin süresini geçmişe ayarlayarak tarayıcıdan silinmesini sağlama.


```php
<?php
// Zamanı geçmişe (örneğin 1 saat geriye) alarak silme işlemi
setcookie("kullanici_adi", "", time() - 3600);
?>
```

