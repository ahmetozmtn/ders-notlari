

# 3.Ünite - PL/SQL Veri Tipleri

---

## 1. Genel Bakış

PL/SQL’de veri tipleri, verilerin **nasıl saklanacağını ve işleneceğini** belirler.  
İki ana gruba ayrılır:

- **Skaler (Scalar)**: Tek bir değer tutar (ör. sayı, karakter, tarih)
    
- **Bütünleşik (Composite)**: Birden fazla veri içerir (ör. tablo, kayıt türleri)
    

PL/SQL, hem **Oracle SQL veri tiplerini** hem de kendine özel veri tiplerini destekler.  
Örneğin: `PLS_INTEGER`, `BINARY_INTEGER`, `REF CURSOR` sadece PL/SQL’e özeldir.

---

## 2. Karakter Veri Tipleri

Alfanümerik (harf + rakam) verileri saklamak için kullanılır.

|Veri Tipi|Açıklama|PL/SQL Maks. Boyut|SQL Maks. Boyut|
|---|---|---|---|
|**CHAR**|Sabit uzunlukta karakter dizisi|32767 bayt|2000 bayt|
|**NCHAR**|Sabit uzunlukta _ulusal karakter seti_|32767 bayt|2000 bayt|
|**VARCHAR2**|Değişken uzunlukta karakter dizisi|32767 bayt|4000–32767 bayt|
|**NVARCHAR2**|Değişken uzunlukta _ulusal karakter seti_|32767 bayt|4000–32767 bayt|

### CHAR

- Sabit uzunlukludur, kalan kısımlar **boşluk karakteriyle** doldurulur.
    
    ```sql
    ch CHAR(5) := 'A';
    -- Bellekte "A    " olarak saklanır.
    ```
    

### VARCHAR2

- Değişken uzunluktadır, **boşluk eklenmez**.
    
    ```sql
    v VARCHAR2(20) := 'Ahmet';
    ```
    

### NCHAR / NVARCHAR2

- Uluslararası karakterleri (ör. Türkçe, Çince) doğru saklamak için kullanılır.
    

---

## 3. Nümerik Veri Tipleri

Sayıları (tam veya ondalıklı) saklar.

### 3.1. NUMBER

- Tüm platformlarda **taşınabilir** ve en yaygın kullanılan tiptir.
    
- 1–22 bayt arası yer kaplar.
    
    ```sql
    salary NUMBER(8,2); -- 6 tam + 2 ondalık basamak
    ```
    

|Alt Tip|Tür|Açıklama|
|---|---|---|
|`INTEGER`, `INT`, `SMALLINT`|Tam sayı|38 basamağa kadar|
|`DEC`, `DECIMAL`, `NUMERIC`|Sabit noktalı|38 basamağa kadar ondalıklı|
|`FLOAT`, `DOUBLE PRECISION`, `REAL`|Kayan noktalı|63–126 bit hassasiyet|

### 3.2. FLOAT

- Kayan noktalı sayıları depolar, **yüksek hassasiyet** sağlar.
    

### 3.3. BINARY_FLOAT / BINARY_DOUBLE

- Donanım tabanlı, **hızlı matematiksel işlem** için kullanılır.
    
- Yaklaşık sonuçlar döndürebilir (örneğin 0.1 + 0.2 = 0.30000004).
    

### 3.4. PLS_INTEGER / BINARY_INTEGER

- -2.147.483.648 ↔ 2.147.483.647 aralığında değer alır.
    
- **NUMBER’dan daha hızlıdır** (işlemci üzerinden hesaplanır).
    
- 4 bayt yer kaplar.
    

| Alt Tip          | Açıklama                                 |
| ---------------- | ---------------------------------------- |
| `NATURAL`        | 0–2.147.483.647, NULL olabilir           |
| `NATURALN`       | 0–2.147.483.647, NULL olamaz             |
| `POSITIVE`       | 1–2.147.483.647, NULL olabilir           |
| `POSITIVEN`      | 1–2.147.483.647, NULL olamaz             |
| `SIGNTYPE`       | -1, 0, 1, NULL değerlerini alır          |
| `SIMPLE_INTEGER` | Aynı aralıkta, NULL alamaz, en hızlı tip |

---

## 4. Tarih ve Saat Veri Tipleri

| Veri Tipi                          | Açıklama                              |
| ---------------------------------- | ------------------------------------- |
| **DATE**                           | Tarih + saat (saniyeye kadar)         |
| **TIMESTAMP**                      | Daha hassas (milisaniye düzeyi)       |
| **TIMESTAMP WITH TIME ZONE**       | Saat dilimi içerir                    |
| **TIMESTAMP WITH LOCAL TIME ZONE** | Kullanıcı saat dilimine göre kaydeder |
| **INTERVAL**                       | Zaman aralığı saklar                  |

### Önemli Fonksiyonlar

| Fonksiyon           | Açıklama                                   |
| ------------------- | ------------------------------------------ |
| `SYSDATE`           | Sunucunun tarih/saat bilgisi               |
| `CURRENT_DATE`      | Oturumun tarih/saat bilgisi                |
| `CURRENT_TIMESTAMP` | Oturumun zaman damgası (saat dilimi dahil) |
| `SYSTIMESTAMP`      | Sunucunun zaman damgası                    |
| `LOCALTIMESTAMP`    | Yerel zaman damgası                        |

---

## 5. INTERVAL Veri Tipleri

Zaman aralıklarını tutar.

### 5.1. INTERVAL YEAR TO MONTH

- Yıl ve ay cinsinden zaman farkı saklar.
    
    ```sql
    INTERVAL '2-6' YEAR TO MONTH -- 2 yıl 6 ay
    ```
    

### 5.2. INTERVAL DAY TO SECOND

- Gün, saat, dakika ve saniye cinsinden zaman farkı saklar.
    
    ```sql
    INTERVAL '5 12:30:45' DAY TO SECOND -- 5 gün 12 saat 30 dk 45 sn
    ```
    

---

## 6. BOOLEAN Veri Tipi

- **Mantıksal değerler** tutar: `TRUE`, `FALSE`, `NULL`.
    
- Oracle tablolarında kullanılmaz, sadece **PL/SQL değişkenleri** için geçerlidir.
    
    ```sql
    DECLARE
      kontrol BOOLEAN := TRUE;
    BEGIN
      IF kontrol THEN
        DBMS_OUTPUT.PUT_LINE('Evet');
      END IF;
    END;
    ```
    

---

## 7. LOB (Large Object) Veri Tipleri

Büyük boyutlu veriler (metin, dosya, resim, video vb.) için kullanılır.  
32 KB sınırını aşan verilerde tercih edilir.

|Veri Tipi|Açıklama|
|---|---|
|**CLOB**|Karakter verisi (veritabanı karakter seti)|
|**NCLOB**|Ulusal karakter seti|
|**BLOB**|Binary (resim, ses, video) veriler|
|**BFILE**|Dosyanın içeriğini değil, **dosya yolunu** saklar|

---

## 8. `%TYPE` Özniteliği

Bir değişkenin veri tipini, bir tablo kolonuna **otomatik olarak bağlar**.  
Kolon tipi değişirse kodda değişiklik gerekmez.

```sql
DECLARE
  v_region_id regions.region_id%TYPE;
  v_region_name regions.region_name%TYPE;
BEGIN
  SELECT region_id, region_name
  INTO v_region_id, v_region_name
  FROM regions
  WHERE region_id = 4;
END;
```

---

## 9. Veri Tipi Dönüşümleri

### 9.1. Örtük (Implicit)

- PL/SQL otomatik dönüştürür.
    
    ```sql
    num NUMBER := '123';  -- string → number
    txt VARCHAR2(10) := 456;  -- number → string
    ```
    

### 9.2. Aşikâr (Explicit)

- Kullanıcı dönüşüm fonksiyonu belirtir.
    

|Fonksiyon|Dönüşüm|
|---|---|
|`TO_CHAR()`|Sayı/tarih → karakter|
|`TO_NCHAR()`|Sayı/tarih → ulusal karakter|
|`TO_NUMBER()`|Karakter → sayı|
|`TO_DATE()`|Karakter → tarih|
|`TO_TIMESTAMP()`|Karakter → timestamp|
|`TO_TIMESTAMP_TZ()`|Karakter → timestamp (saat dilimiyle)|

---

### Sonuç

- PL/SQL veri tipleri: **karakter, sayısal, tarih/zaman, mantıksal, büyük veri nesneleri**
    
- `%TYPE` özniteliği, dinamik ve bakımı kolay kod sağlar.
    
- Veri tipi dönüşümleri **örtük** veya **aşikâr** şekilde yapılır.
    
- `BOOLEAN`, `PLS_INTEGER`, `BLOB`, `INTERVAL` gibi türler **PL/SQL’e özgüdür**.
    